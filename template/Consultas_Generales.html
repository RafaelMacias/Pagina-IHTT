<link href="assets/css/sweetalert.css" type="text/css" rel="stylesheet" media="screen,projection">
<style>
.sweet-alert {
  border-radius: 20px;
  border-style: solid;
  border-color: #424aa07a !important;
  border-width: 5px
}

.m .sweet-overlay {
  background-color: rgba(0, 188, 212, 0.27);
}

.a .sweet-overlay {
  background-color: rgba(239, 67, 13, 0.45);
}
.btn-like {
   height: 22px;
   background: #18634b;
   border-radius: 50px;
   width: 20px;
   padding: 2px;
   color: white !important
}
.btn-dislike {
   height: 22px;
   background: #a91e2c;
   border-radius: 50px;
   width: 20px;
   padding: 3px;
   color: white !important
}
.text-success,
.text-success:hover {
   color: #18634ba1!important
}
.primer-pago-background {
   background-color: #0CC27E
}

.segundo-pago-background {
   background-color: #0CC27E
}
th {
   color: #5bcfde;
}
td {
   color: #9e9e9e;
}
</style>
<section class="section section-lg" style="padding-top: 0rem;padding-bottom: 2rem;">
   <div class="container">
      <div class="row pt-5 pt-md-0">
         <div class="col-lg-12 mb-5">
            <div class="card bg-white border-light flex-lg-row align-items-center no-gutters p-4">
               <!-- <a href="blog-post.html" class="col-12 col-lg-6"><img src="assets/img/consultas.jpg" alt="themesberg office" class="card-img-top rounded"></a> -->
               <div class="card-body d-flex flex-column justify-content-between col-auto py-4 p-lg-3 p-xl-5">
                  <h2 class="h1 mb-5 text-center"><i class="fab fa-searchengin" style="margin-right: 5px;font-size: 4rem"></i>Consultas Generales</h2>
                 <!--  <p>Hoy estamos abrumados por el contenido y la inspiración puede llegar a cualquier parte. El punto es recopilarlo y compartirlo de una manera estructurada para facilitar la información a nuestros, cliente y usuarios.</p> -->
                  <div class="row">
                     <div class="col-12 col-lg-4">
                        <div class="form-group">
                           <label class="my-1 mr-2" for="tipobusqueda" style="margin-bottom: .50rem!important;">Tipo de b&uacute;squeda *</label> 
                           <select onchange="Parametro_Busqueda(this),SearchInput();" class="custom-select my-1 mr-sm-2 select2bs4" id="tipobusqueda" style="width: 100%;">
                              <option value="-1" disabled selected>Tipo...</option>
                              @@BUSQUEDA@@
                          </select>
                        </div>
                       <!--  <input type="text" id="tipavisocobro" readonly=""> -->
                     </div>

                     <div class="col-12 col-lg-4">
                        <div class="form-group">
                           <label class="my-1 mr-2" for="parbusqueda" style="margin-bottom: .50rem!important;">Par&aacute;metro de b&uacute;squeda *</label> 
                           <select onchange="SearchInput();" class="custom-select my-1 mr-sm-2 select2bs4" id="parbusqueda" style="width: 100%;">
                              <option value="-1" disabled selected>Par&aacute;metro...</option>
                          </select>
                        </div>
                           <input type="hidden" id="inputparambusqueda" readonly="">
                     </div>

                     <div class="col-12 col-lg-4">
                        <div class="form-group">
                           <label class="my-1 mr-2" for="inpbuscador" style="margin-bottom: .50rem!important;">Nombre del par&aacute;metro que buscas *</label> 
                           <div class="input-group mb-4">
                              <input class="form-control" type="text" id="inpbuscador" disabled="">
                              <div class="input-group-append" style="cursor: pointer;display: none;" id="buttombuscador" onclick="AlertBusqueda()">
                                 <span class="input-group-text"><i class="fas fa-search"></i></span>
                              </div>
                           </div>
                        </div>
                     </div>

                  </div>
                  <div class="alert alert-danger alert-dismissible fade show" id="alertbusqueda" role="alert" style="display:none;">
                     <span class="alert-inner--icon"><i class="far fa-dizzy"></i></span>
                     <span class="alert-inner--text"><strong>¡Lo sentimos!</strong> Para poder realizar una búsqueda es necesario que introduzcas él parámetro el cual deseas buscar.</span>
                  </div>
                  <table style="display: none;" id="tablebar">
                     <tbody id="resultbar"></tbody>
                    
                  </table>
               </div>
            </div>
         </div>

         

         <div class="col-12 col-md-12 col-lg-12 mb-4 mb-lg-12" id="resultadobusqueda" style="display: none;">
            <div class="card bg-white border-light rounded">
               <div class="card-body p-0 pt-4">
                   <h2 class="h1 mb-3 text-center"><i class="fas fa-cloud-download-alt" style="margin-right: 5px;font-size: 4rem"></i>Resultado de tu consulta</h2>

                  <div id="concenso" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Censo"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headeraviso"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 134%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Nº</th>
                                                <th style="text-align: center;">Código Censo</th>
                                                <th style="text-align: center;">Fecha Emisión</th>
                                                <th style="text-align: center;">Estado</th>
                                                <th style="text-align: center;">Placa</th>
                                                <th style="text-align: center;">RTN</th>
                                                <th style="text-align: center;">Concesionario</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resultcenso"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginacenso">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                          <span id="totalvistas" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para el censo-->

                  <!--Table de consultas conductores-->
                  <div id="conconductor" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Conductores"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headerconductor"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 100%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Nº</th>
                                                <th style="text-align: center;">Registro</th>
                                                <th style="text-align: center;">Concesionario</th>
                                                <th style="text-align: center;">Placa</th>
                                                <th style="text-align: center;">Marca</th>
                                                <th style="text-align: center;">Modelo</th>
                                                <th style="text-align: center;">Color</th>
                                                <th style="text-align: center;">Fecha Registro</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resultconductores"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginaconductores">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                       <span id="totvistasblacklist" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para consulta conductores-->

                  <!--Table de consultas certificados-->
                  <div id="concertificado" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Certificado"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headercertificado"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 100%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Nº</th>
                                                <th style="text-align: center;">Certificado</th>
                                                <th style="text-align: center;">Expediente</th>
                                                <th style="text-align: center;">RTN</th>
                                                <th style="text-align: center;">Estado</th>
                                                <th style="text-align: center;">Ubicación Entrega</th>
                                                <th style="text-align: center;">Placa</th>
                                                <th style="text-align: center;">Registro DGT</th>
                                                <th style="text-align: center;">Emisi&oacute;n</th>
                                                <th style="text-align: center;">Categori&aacute;</th>
                                                <th style="text-align: center;">Direcci&oacute;n</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resultcertificado"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginacertificado">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                       <span id="totvistascertificados" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para consulta certificados-->

                  <!--Table de consultas permisos eventuales-->
                  <div id="coneventuales" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Eventuales"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headereventuales"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 150%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Nº</th>
                                                <th style="text-align: center;">Permiso</th>
                                                <th style="text-align: center;">Estado</th>
                                                <th style="text-align: center;">Emisi&oacute;n</th>
                                                <th style="text-align: center;">Placa</th>
                                                <th style="text-align: center;">Tipo Permiso</th>
                                                <th style="text-align: center;">Origen</th>
                                                <th style="text-align: center;">Destino</th>
                                                <th style="text-align: center;">Identidad</th>
                                                <th style="text-align: center;">Concesionario</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resulteventuales"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginaeventuales">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                       <span id="totvistaseventuales" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para consulta permisos eventuales-->

                  <!--Table de consultas registro conductores-->
                  <div id="conregistrocon" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Registrocon"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headerregistrocon"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 150%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Nº</th>
                                                <th style="text-align: center;">Registro</th>
                                                <th style="text-align: center;">Nombre</th>
                                                <th style="text-align: center;">Tipo Registro</th>
                                                <th style="text-align: center;">Modalidad</th>
                                                <th style="text-align: center;">Placa</th>
                                                <th style="text-align: center;">Certificado</th>
                                                <th style="text-align: center;">Registro</th>
                                                <th style="text-align: center;">Empresa</th>
                                                <th style="text-align: center;">Observacion Apro/Den</th>
                                                <th style="text-align: center;">Fecha Registro</th>
                                                <th style="text-align: center;">Detalle Pago</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resultregistrocon"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginaregistrocon">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                       <span id="totvistasregistrocon" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para consulta registro conductores-->

                  <!--Table de consultas resoluciones-->
                  <div id="conresolucion" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Resolucion"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headerresolucion"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 150%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Nº</th>
                                                <th style="text-align: center;">Notificaci&oacute;n</th>
                                                <th style="text-align: center;">Expediente</th>
                                                <th style="text-align: center;">Fecha Notificación</th>
                                                <th style="text-align: center;">Concesionario</th>
                                                <th style="text-align: center;">Abogado</th>
                                                <th style="text-align: center;">Descargar</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resultresolucion"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginaresolucion">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                       <span id="totvistasresolucion" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para consulta resoluciones-->

                  <!--Table de consultas validacion documentos ip-->
                  <div id="convalidacionip" style="display: none;">
                     <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card border-light mb-4">
                           <div class="row no-gutters align-items-center">
                              <div class="col-12 col-lg-12 col-xl-12">
                                 <div class="card-body py-lg-0">
                                    <div class="d-flex no-gutters align-items-center mb-2">
                                       <div class="col text-left">
                                          <ul class="list-group mb-0">
                                             <li class="list-group-item small p-0"><span class="fas fa-database text-turqueza mr-2"></span>Total resultados encontrados: <span id="resultMsg_Validaconip"></span></li>
                                          </ul>
                                       </div>
                                    </div>
                                    <a href="#">
                                       <h2 class="h5"><div id="headervalidacionip"></div></h2>
                                    </a>
                                    <div class="row table-responsive">
                                       <table class="table" style="width: 170%;">
                                          <thead>
                                             <tr>
                                                <th style="text-align: center;">Solicitud</th>
                                                <th style="text-align: center;">Expediente</th>
                                                <th style="text-align: center;">No. Documento</th>
                                                <th style="text-align: center;">Concesionario</th>
                                                <th style="text-align: center;">Permiso Explotaci&oacute;n</th>
                                                <th style="text-align: center;">Certificado</th>
                                                <th style="text-align: center;">Marca</th>
                                                <th style="text-align: center;">Modelo</th>
                                                <th style="text-align: center;">Color</th>
                                                <th style="text-align: center;">Motor</th>
                                                <th style="text-align: center;">Chasis</th>
                                                <th style="text-align: center;">Tipo Unidad</th>
                                             </tr>
                                          </thead>
                                          <tbody id="resultvalidacionip"></tbody>
                                       </table>
                                       <div class="d-flex justify-content-center w-100">
                                          <nav aria-label="Page navigation example">
                                            <ul class="pagination" style=" text-align: right; " id="paginavalidacionip">
                                            </ul>
                                          </nav>
                                       </div> 
                                    </div>
                                    <div class="col d-flex pl-0">
                                       <span class="text-muted font-small"><span class="fas fa-eye mr-2 text-turqueza"></span></span>
                                       <span id="totvistasvalidacionip" class="mr-3" style="color: #9e9e9e!important;"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><!--cierre div oculto para consulta validacion documentos ip-->

               </div>
            </div>
         </div>
      </div>
   </div>
</section>


<div class="modal fade" id="modal-detalle" tabindex="-1" role="dialog" aria-labelledby="modal-detalle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div id="headerpago" class="modal-header">
                <h6 class="modal-title"><div style="color: white;" id="titlemodal"></div></h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
               <div class="alert alert-success" role="alert" id="tarjetaverif"><div class="alert-icon"><span class="fas fa-bell"></span></div><h4 class="alert-heading"><span id="textoverif"></span></h4><hr><span style="color:white;font-weight:700;" id="estadoverif"></span></div>
               <br>

               <p style="font-weight: 600;"><i class="fas fa-info-circle mr-2"></i>Se detalla los datos del <span id="textnumero"></span> pago.</p><hr>

               <div class="row" id="inputsdatospersona" style="display: none">

                  <div class="col-12 col-lg-6">
                     <div class="form-group text-left">
                       <label for="identidad">Identidad:</label>
                       <input type="text" class="form-control" id="identidad" placeholder="Identidad" readonly="">
                     </div>
                  </div>

                  <div class="col-12 col-lg-6">
                     <div class="form-group text-left">
                       <label for="telefono">Telefono:</label>
                       <input type="text" class="form-control" id="telefono" placeholder="Telefono" readonly="">
                     </div>
                  </div>
                
               </div>

               <div id="inputspersonas" style="display: none">

                  <div class="row">

                     <div class="col-12 col-lg-6">
                        <div class="form-group text-left">
                          <label for="nombre">Nombres:</label>
                          <input type="text" class="form-control" id="nombre" placeholder="Nombre" readonly="">
                        </div>
                     </div>

                     <div class="col-12 col-lg-6">
                        <div class="form-group text-left">
                          <label for="apellido">Apellidos:</label>
                          <input type="text" class="form-control" id="apellido" placeholder="Apellidos" readonly="">
                        </div>
                     </div>
                   
                  </div>

                  <div class="row">
                     <div class="col-12 col-lg-12">
                        <div class="form-group">
                           <label for="observaciones">Observaciones:</label>
                           <textarea class="form-control" id="observaciones" rows="3" readonly=""></textarea>
                        </div>
                     </div>
                  </div>

               </div>

               <div class="row" id="inputsdenegados" style="display: none">

                  <div class="col-12 col-lg-6">
                     <div class="form-group text-left">
                       <label for="denegadopor">Denegado por:</label>
                       <input type="text" class="form-control" id="denegadopor" placeholder="Denegado por" readonly="">
                     </div>
                  </div>

                  <div class="col-12 col-lg-6">
                     <div class="form-group text-left">
                       <label for="motivo">Motivo:</label>
                       <input type="text" class="form-control" id="motivo" placeholder="Motivo" readonly="">
                     </div>
                  </div>

               </div>
            </div>
            <div class="modal-footer">
               <!-- <button type="button" class="btn btn-sm btn-secondary">I Got It</button> -->
               <button type="button" class="btn btn-link text-danger ml-auto" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<script>
function Parametro_Busqueda(){

   postdata = {
      action: "parametro-busqueda",
      tipo: $("#tipobusqueda").val()
    }
    $.post( "Api_PW.php", postdata, null, "json" )
      .done(function( datos, textStatus, jqXHR ) {
          var data = datos[0];
          var result ='<option value="-1" disabled selected>Parámetro...</option>';
          for(var i=0;i<data.length;i++){
              result += data[i]['TipoBusqueda'];
          }
          $("#parbusqueda").html(result);
       })
    .fail(function( jqXHR, textStatus, errorThrown ) {
        if ( console && console.log ) {
           swal({
                type: 'error',
                title: '!Error¡',
                text: 'Error de funcion Parámetro Busqueda',
              })
        }
  });

}
//Funcion para validar el input de la busqueda
function SearchInput(){

   if($("#parbusqueda").val()==null){
      document.getElementById("inpbuscador").disabled = true;
      $("#buttombuscador").hide();
      $("#alertbusqueda").hide();
      $("#inpbuscador").val('');
   }else {
      document.getElementById("inpbuscador").disabled = false;
      $("#buttombuscador").show();
   }

   setTimeout ('SearchInput()', 100);
}

//Funcion para validar el mensaje de error de busqueda
function AlertBusqueda(){

   if($("#inpbuscador").val().trim().length<1){
      $("#alertbusqueda").show();
      $("#resultadobusqueda").hide();
   }else {
      $("#alertbusqueda").hide();
      SeleccionBusqueda();
   }

   setTimeout ('SearchInput()', 100);
}

function SeleccionBusqueda(){
   //Consultas Censo
   if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-3') {
      $("#inputparambusqueda").val('1');
      saveTotalVistas();
      searchCenso();//Consulta por Censo
   }else if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-1') {
      $("#inputparambusqueda").val('2');
      saveTotalVistas();
      searchCenso();//Consulta por Certificado
   }else if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-4') {
      $("#inputparambusqueda").val('3');
      saveTotalVistas();
      searchCenso();//Consulta por Concesionario
   }else if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-7') {
      $("#inputparambusqueda").val('4');
      saveTotalVistas();
      searchCenso();//Consulta por Permiso
   }else if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-2') {
      $("#inputparambusqueda").val('5');
      saveTotalVistas();
      searchCenso();//Consulta por Placas
   }else if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-6') {
      $("#inputparambusqueda").val('6');
      saveTotalVistas();
      searchCenso();//Consulta por RTN
   }else if ($("#tipobusqueda").val()=='IDB-1' && $("#parbusqueda").val()=='IDP-8') {
      $("#inputparambusqueda").val('7');
      saveTotalVistas();
      searchCenso();
   //Consultas Conductores
   }else if ($("#tipobusqueda").val()=='IDB-2' && $("#parbusqueda").val()=='IDP-4') {
      $("#inputparambusqueda").val('8');
      saveTotalVistas();
      searchConductor();//Busqueda por Concesionario
   }else if ($("#tipobusqueda").val()=='IDB-2' && $("#parbusqueda").val()=='IDP-10') {
      $("#inputparambusqueda").val('9');
      saveTotalVistas();
      searchConductor();//Busqueda por Identidad
   }else if ($("#tipobusqueda").val()=='IDB-2' && $("#parbusqueda").val()=='IDP-6') {
      $("#inputparambusqueda").val('10');
      saveTotalVistas();
      searchConductor();//Busqueda por Placa
   //Consultas Certificado
   }else if ($("#tipobusqueda").val()=='IDB-3' && $("#parbusqueda").val()=='IDP-9') {
      $("#inputparambusqueda").val('11');
      saveTotalVistas();
      searchCertificado();//Busqueda por Categoria
   }else if ($("#tipobusqueda").val()=='IDB-3' && $("#parbusqueda").val()=='IDP-1') {
      $("#inputparambusqueda").val('12');
      saveTotalVistas();
      searchCertificado();//Busqueda por Certificado
   }else if ($("#tipobusqueda").val()=='IDB-3' && $("#parbusqueda").val()=='IDP-7') {
      $("#inputparambusqueda").val('13');
      saveTotalVistas();
      searchCertificado();//Busqueda por Expediente
   }else if ($("#tipobusqueda").val()=='IDB-3' && $("#parbusqueda").val()=='IDP-6') {
      $("#inputparambusqueda").val('14');
      saveTotalVistas();
      searchCertificado();//Busqueda por Placa
   }else if ($("#tipobusqueda").val()=='IDB-3' && $("#parbusqueda").val()=='IDP-8') {
      $("#inputparambusqueda").val('15');
      saveTotalVistas();
      searchCertificado();//Busqueda por RTN 
   //Consulta Permisos para circular
   }else if ($("#tipobusqueda").val()=='IDB-4' && $("#parbusqueda").val()=='IDP-3') {
      $("#inputparambusqueda").val('16');
      saveTotalVistas();
      searchEventuales();//Busqueda por Censo 
   }else if ($("#tipobusqueda").val()=='IDB-4' && $("#parbusqueda").val()=='IDP-10') {
      $("#inputparambusqueda").val('17');
      saveTotalVistas();
      searchEventuales();//Busqueda por Identidad 
   }else if ($("#tipobusqueda").val()=='IDB-4' && $("#parbusqueda").val()=='IDP-14') {
      $("#inputparambusqueda").val('18');
      saveTotalVistas();
      searchEventuales();//Busqueda por Permiso Eventual 
   //Consutla Registro Conductores
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-1') {
      $("#inputparambusqueda").val('19');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Certificado 
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-4') {
      $("#inputparambusqueda").val('20');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Concesionaro 
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-5') {
      $("#inputparambusqueda").val('21');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Empresea 
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-10') {
      $("#inputparambusqueda").val('22');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Identidad 
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-6') {
      $("#inputparambusqueda").val('23');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Identidad 
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-15') {
      $("#inputparambusqueda").val('24');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Registro Conductor 
   }else if ($("#tipobusqueda").val()=='IDB-5' && $("#parbusqueda").val()=='IDP-11') {
      $("#inputparambusqueda").val('25');
      saveTotalVistas();
      searchRegistroConductores();//Busqueda por Registro Vehiculo 
   //Consutla Resoluciones
   }else if ($("#tipobusqueda").val()=='IDB-6' && $("#parbusqueda").val()=='IDP-13') {
      $("#inputparambusqueda").val('26');
      saveTotalVistas();
      searchResoluciones();//Busqueda por Colegiación 
   }else if ($("#tipobusqueda").val()=='IDB-6' && $("#parbusqueda").val()=='IDP-4') {
      $("#inputparambusqueda").val('27');
      saveTotalVistas();
      searchResoluciones();//Busqueda por Concesionario 
   }else if ($("#tipobusqueda").val()=='IDB-6' && $("#parbusqueda").val()=='IDP-7') {
      $("#inputparambusqueda").val('28');
      saveTotalVistas();
      searchResoluciones();//Busqueda por Expediente 
   }else if ($("#tipobusqueda").val()=='IDB-6' && $("#parbusqueda").val()=='IDP-12') {
      $("#inputparambusqueda").val('29');
      saveTotalVistas();
      searchResoluciones();//Busqueda por Notificacion 
   //Consulta Validacion Documentos IP
   }else if ($("#tipobusqueda").val()=='IDB-7' && $("#parbusqueda").val()=='IDP-1') {
      $("#inputparambusqueda").val('30');
      saveTotalVistas();
      searchValidacionIP();//Busqueda por Certificado 
   }else if ($("#tipobusqueda").val()=='IDB-7' && $("#parbusqueda").val()=='IDP-2') {
      $("#inputparambusqueda").val('31');
      saveTotalVistas();
      searchValidacionIP();//Busqueda por Permiso Explotacion 
   }else if ($("#tipobusqueda").val()=='IDB-7' && $("#parbusqueda").val()=='IDP-6') {
      $("#inputparambusqueda").val('32');
      saveTotalVistas();
      searchValidacionIP();//Busqueda por Placa 
   }else if ($("#tipobusqueda").val()=='IDB-7' && $("#parbusqueda").val()=='IDP-16') {
      $("#inputparambusqueda").val('33');
      saveTotalVistas();
      searchValidacionIP();//Busqueda por Solicitud 
   }else if ($("#tipobusqueda").val()=='IDB-7' && $("#parbusqueda").val()=='IDP-7') {
      $("#inputparambusqueda").val('34');
      saveTotalVistas();
      searchValidacionIP();//Busqueda por Expediente 
   }
}

//Funcion para recuperar el total de vistas en consultas
function getTotalVistas_General() {

  postdata = {
      action: "get-total-vistas-consultasg",
      tipo: $("#tipobusqueda").val()
   }
   $.post( "Api_PW.php", postdata, null, "json" )
      .done(function( data, textStatus, jqXHR ) {
         //console.log(data);
         var vistas = data[0];
         if(data[1]>0){
            $("#totalvistas").html(vistas[0].Total_Vistas);
            $("#totvistasblacklist").html(vistas[0].Total_Vistas);
            $("#totvistascertificados").html(vistas[0].Total_Vistas);
            $("#totvistaseventuales").html(vistas[0].Total_Vistas);
            $("#totvistasregistrocon").html(vistas[0].Total_Vistas);
            $("#totvistasresolucion").html(vistas[0].Total_Vistas);
            $("#totvistasvalidacionip").html(vistas[0].Total_Vistas);
         } 
      })
   .fail(function( jqXHR, textStatus, errorThrown ) {
      if ( console && console.log ) {
         //toasterror("Error de conexión intenta nuevamente");
         swal({
            type: 'error',
            title: '!Error¡',
            text: 'Error funcion total visitas',
         })
      }
   });
}

//Funcion de insert las vistas
function saveTotalVistas() {

   var form_data = new FormData();
   form_data.append("action","save-vistas-consultasg");
   //Datos para el insert del like
   form_data.append("tipobusqueda", $("#tipobusqueda").val());
   form_data.append("parbusqueda", $("#parbusqueda").val());
  
   fetch("Api_PW.php",
    {
      method: "POST",
      body: form_data
    })
      .then((resp) => resp.json())
      .then(Data=>{
         if (Data.status==1) {
            getTotalVistas_General();
         }else {
            sweetAlert("!ATENCIÓN¡",Data.status, "error");
         }
      })
    .catch(err=>{ console.log(err); });
}
</script>
<!--Busqueda del aviso de cobro-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchCenso(0);
  }, false);

  function nextPagecenso() {
    var suma = parseInt(last);
    searchCenso(suma);
  }

  function backPagecenso() {
    searchCenso(last - 10);
  }

  function searchCenso(le) {
   $("#headeraviso").html('Se encontro las siguiente información del Censo seg&uacute;n tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").show();
   $("#conconductor").hide();
   $("#concertificado").hide();
   $("#coneventuales").hide();
   $("#conregistrocon").hide();
   $("#conresolucion").hide();
   $("#convalidacionip").hide();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==1) {
      var tipoparametro = 'CodigoCenso';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
      //var parameter = last+'&col_name='+$('#ticket').val()+'&Tipo='+tipo;
    }else if ($('#inputparambusqueda').val()==2) {
      var tipoparametro = 'Certificado';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==3) {
      var tipoparametro = 'Concesionario';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==4) {
      var tipoparametro = 'Expediente';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==5) {
      var tipoparametro = 'PermisoExplotacion';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==6) {
      var tipoparametro = 'Placa';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==7) {
      var tipoparametro = 'RTN_Concesionario';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = last+'&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-censo&Next=" + parameter,
      success: function(dataserver) {
        var resultcenso = '';
        var pagination = '';
        var info = dataserver[0];
        var pagin = dataserver[1];
        last = info.last;
        var data = dataserver[2];


        for (var i = 0; i < data.length; i++) {

         if (data[i].Censo_Estado=='ACTIVO') {
            var estado = '<td style=" color: #28a745;text-align: center;font-weight:600; ">ACTIVO</td>';
         }else if (data[i].Censo_Estado=='INACTIVO') {
            var estado = '<td style=" color: #ffc107;text-align: center;font-weight:600; ">INACTIVO</td>';
         }else if (data[i].Censo_Estado=='ANULADO') {
            var estado = '<td style=" color: #893168b3;text-align: center;font-weight:600; ">ANULADO</td>';
         }else{
            var estado = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">NO APLICA</td>';
         }

        resultcenso +='<tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td style="text-align: center">' + data[i].CodigoCenso + '</td> <td style="text-align:center">' + data[i].SistemaFecha + '</td>'+estado+'<td style="text-align:center;">' +data[i].Placa+ '</td> <td style="text-align: center;">' + data[i].RTN_Concesionario + '</td><td style="text-align: center;">' + data[i].Concesionario + '</td>';

        }

        var ultima = "";
        var activepage = "";
        for (var i = 0; i < pagin.length; i++) {
          pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchCenso(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
          activepage = pagin[i].Paginas;
          if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
          anter = pagin[0].Paginas;
        }
        var backpage = ultima-10;
        var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchCenso(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchCenso(0);"><i class="fa fa-home"></i></a></li>';

        var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPagecenso();" ><i class="fa fa-angle-double-right"></i></a></li>';


        if (activepage == ultima) {
          Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        }

        if (info.last <= 10) {
          anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        }

        $("#resultMsg_Censo").html(info.Total);
        $("#resultcenso").html(resultcenso);
        $("#paginacenso").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resultcenso").html('<tr> <td colspan="7" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resultcenso").html('<tr> <td colspan="7" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }
</script>
<!--termina el censo-->
<!--Busuqeda de conductor-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchConductor(0);
  }, false);

  function nextPageconductor() {
    var suma = parseInt(last);
    searchConductor(suma);
  }

  function backPageconductor() {
    searchConductor(last - 10);
  }

  function searchConductor(le) {
   $("#headerconductor").html('Se encontro las siguiente información del Conductor segun tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").hide();
   $("#conconductor").show();
   $("#concertificado").hide();
   $("#coneventuales").hide();
   $("#conregistrocon").hide();
   $("#conresolucion").hide();
   $("#convalidacionip").hide();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==8) {
      var tipoparametro = 'Nombre_Completo';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==9) {
      var tipoparametro = 'ID_Persona';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==10) {
      var tipoparametro = 'ID_Placa';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = last+'&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-conductores&Next=" + parameter,
      success: function(dataserver) {
        var resultconductores = '';
        var pagination = '';
        var info = dataserver[0];
        var pagin = dataserver[1];
        last = info.last;
        var data = dataserver[2];

        for (var i = 0; i < data.length; i++) {

        resultconductores +='<tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td class="text-center">' + data[i].ID_Registro + '</td> <td class="text-center">' + data[i].Nombre_Completo + '</td> <td class="text-center">' + data[i].ID_Placa +'</td> <td class="text-center">' + data[i].DESC_Marca +'</td><td class="text-center">'+data[i].DESC_Modelo+'</td><td class="text-center">' + data[i].DESC_Color +'</td><td class="text-center">' + data[i].Fecha_Registro +'</td>';
        }

        var ultima = "";
        var activepage = "";
        for (var i = 0; i < pagin.length; i++) {
          pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchConductor(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
          activepage = pagin[i].Paginas;
          if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
          anter = pagin[0].Paginas;
        }
        var backpage = ultima-10;
        var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchConductor(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchConductor(0);"><i class="fa fa-home"></i></a></li>';

        var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPageconductor();" ><i class="fa fa-angle-double-right"></i></a></li>';


        if (activepage == ultima) {
          Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        }

        if (info.last <= 10) {
          anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        }

        $("#resultMsg_Conductores").html(info.Total);
        $("#resultconductores").html(resultconductores);
        $("#paginaconductores").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resultconductores").html('<tr> <td colspan="8" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resultconductores").html('<tr> <td colspan="8" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }
</script>
<!--termina la consulta de conductores-->
<!--Busuqeda de certificado-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchCertificado(0);
  }, false);

  function nextPagecertificado() {
    var suma = parseInt(last);
    searchCertificado(suma);
  }

  function backPagecertificado() {
    searchCertificado(last - 10);
  }

  function searchCertificado(le) {
   $("#headercertificado").html('Se encontro las siguiente información del Certificado segun tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").hide();
   $("#conconductor").hide();
   $("#concertificado").show();
   $("#coneventuales").hide();
   $("#conregistrocon").hide();
   $("#conresolucion").hide();
   $("#convalidacionip").hide();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==11) {
      var tipoparametro = 'DESC_Categoria';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==12) {
      var tipoparametro = 'N_Certificado';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==13) {
      var tipoparametro = 'ID_Expediente';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==14) {
      var tipoparametro = 'ID_Placa';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==15) {
      var tipoparametro = 'RTN_Concesionario';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = last+'&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-certificados&Next=" + parameter,
      success: function(dataserver) {
        var resultcertificado = '';
        var pagination = '';
        var info = dataserver[0];
        var pagin = dataserver[1];
        last = info.last;
        var data = dataserver[2];

        for (var i = 0; i < data.length; i++) {

         if (data[i].DESC_Estado=='PENDIENTE') {
            var estado = '<td style=" color: #ffc107;text-align: center;font-weight:600; ">PENDIENTE</td>';
         }else if (data[i].DESC_Estado=='ENTREGADO') {
            var estado = '<td style=" color: #28a745;text-align: center;font-weight:600; ">ENTREGADO</td>';
         }else{
            var estado = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">NO APLICA</td>';
         }

        resultcertificado +='<tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td class="text-center">' + data[i].N_Certificado + '</td> <td class="text-center">' + data[i].ID_Expediente + '</td> <td class="text-center">' + data[i].RTN_Concesionario +'</td>'+estado+'<td class="text-center">'+data[i].Nombre_Area+'</td><td class="text-center">'+data[i].ID_Placa+'</td><td class="text-center">' + data[i].Registro_Anterior +'</td><td class="text-center">' + data[i].Fecha_Emision +'</td><td class="text-center">' + data[i].DESC_Categoria +'</td><td class="text-center">' + data[i].Direccion_Registro +'</td>';
        }

        var ultima = "";
        var activepage = "";
        for (var i = 0; i < pagin.length; i++) {
          pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchCertificado(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
          activepage = pagin[i].Paginas;
          if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
          anter = pagin[0].Paginas;
        }
        var backpage = ultima-10;
        var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchCertificado(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchCertificado(0);"><i class="fa fa-home"></i></a></li>';

        var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPagecertificado();" ><i class="fa fa-angle-double-right"></i></a></li>';


        if (activepage == ultima) {
          Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        }

        if (info.last <= 10) {
          anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        }

        $("#resultMsg_Certificado").html(info.Total);
        $("#resultcertificado").html(resultcertificado);
        $("#paginacertificado").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resultcertificado").html('<tr> <td colspan="10" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resultcertificado").html('<tr> <td colspan="10" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }
</script>
<!--termina la consulta de certificado-->
<!--Busuqeda de permisos eventuales-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchEventuales(0);
  }, false);

  function nextPageEventual() {
    var suma = parseInt(last);
    searchEventuales(suma);
  }

  function backPageEventual() {
    searchEventuales(last - 10);
  }

  function searchEventuales(le) {
   $("#headereventuales").html('Se encontro las siguiente información del Permiso segun tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").hide();
   $("#conconductor").hide();
   $("#concertificado").hide();
   $("#coneventuales").show();
   $("#conregistrocon").hide();
   $("#conresolucion").hide();
   $("#convalidacionip").hide();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==16) {
      var tipoparametro = 'CodigoCenso';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==17) {
      var tipoparametro = 'ConductorIdentidad';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==18) {
      var tipoparametro = 'PermisoCodigo';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = last+'&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-permisos-eventuales&Next=" + parameter,
      success: function(dataserver) {
        var resulteventuales = '';
        var pagination = '';
        var info = dataserver[0];
        var pagin = dataserver[1];
        last = info.last;
        var data = dataserver[2];

        for (var i = 0; i < data.length; i++) {

         if (data[i].Permiso_Estado=='Pendiente Pago en Banco') {
            var estado = '<td style=" color: #ffc107;text-align: center;font-weight:600; ">Pendiente Pago en Banco</td>';
         }else if (data[i].Permiso_Estado=='Pagado en Banco - Pendiente Entrega') {
            var estado = '<td style=" color: #ffc107;text-align: center;font-weight:600; ">Pendiente Pago en Banco</td>';
         }else if (data[i].Permiso_Estado=='Entregado') {
            var estado = '<td style=" color: #28a745;text-align: center;font-weight:600; ">Entregado</td>';
         }else if (data[i].Permiso_Estado=='Anulado') {
            var estado = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">Anulado</td>';
         }else if (data[i].Permiso_Estado=='Vencido - No Reclamado en Ventanilla') {
            var estado = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">Vencido - No Reclamado en Ventanilla</td>';
         }else if (data[i].Permiso_Estado=='Vencido - Incumplimiento de Pago') {
            var estado = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">Vencido - Incumplimiento de Pago</td>';
         }else{
            var estado = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">NO APLICA</td>';
         }

        resulteventuales +='<tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td class="text-center">' + data[i].PermisoCodigo + '</td> '+estado+' <td class="text-center">' + data[i].SistemaFecha +'</td><td class="text-center">'+data[i].Placa+'</td><td class="text-center">' + data[i].PermisoTipo +'</td><td class="text-center">' + data[i].Origen +'</td><td class="text-center">' + data[i].Destino +'</td><td class="text-center">' + data[i].ConductorIdentidad +'</td><td class="text-center">' + data[i].ConductorNombre +'</td>';
        }

        var ultima = "";
        var activepage = "";
        for (var i = 0; i < pagin.length; i++) {
          pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchEventuales(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
          activepage = pagin[i].Paginas;
          if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
          anter = pagin[0].Paginas;
        }
        var backpage = ultima-10;
        var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchEventuales(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchEventuales(0);"><i class="fa fa-home"></i></a></li>';

        var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPageEventual();" ><i class="fa fa-angle-double-right"></i></a></li>';


        if (activepage == ultima) {
          Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        }

        if (info.last <= 10) {
          anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        }

        $("#resultMsg_Eventuales").html(info.Total);
        $("#resulteventuales").html(resulteventuales);
        $("#paginaeventuales").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resulteventuales").html('<tr> <td colspan="10" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resulteventuales").html('<tr> <td colspan="10" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }
</script>
<!--termina la consulta de permisos eventuales-->

<!--Busuqeda de registro conductores-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchRegistroConductores(0);
  }, false);

  function nextPageRegistrocon() {
    var suma = parseInt(last);
    searchRegistroConductores(suma);
  }

  function backPageRegistrocon() {
    searchRegistroConductores(last - 10);
  }

  function searchRegistroConductores(le) {
   $("#headerregistrocon").html('Se encontro las siguiente información del Registro segun tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").hide();
   $("#conconductor").hide();
   $("#concertificado").hide();
   $("#coneventuales").hide();
   $("#conregistrocon").show();
   $("#conresolucion").hide();
   $("#convalidacionip").hide();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==19) {
      var tipoparametro = 'ID_Certificado_Operacion';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==20) {
      var tipoparametro = 'Nombre_Completo';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==21) {
      var tipoparametro = 'DESC_Empresa';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==22) {
      var tipoparametro = 'ID_Persona';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==23) {
      var tipoparametro = 'ID_Placa';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==24) {
      var tipoparametro = 'ID_Ingreso';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==25) {
      var tipoparametro = 'ID_Numero_Registro';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = last+'&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-registro-conductores&Next=" + parameter,
      success: function(dataserver) {
        var resultregistrocon = '';
        var pagination = '';
        var info = dataserver[0];
        var pagin = dataserver[1];
        last = info.last;
        var data = dataserver[2];

        for (var i = 0; i < data.length; i++) {

         //validacion observacion
         if (data[i].OBS_Apr_Den!= null) {
            var OBS = '<td style="text-align: center">'+data[i].OBS_Apr_Den+'</td>';
         }else{
            var OBS = '<td style=" color: #dc3545;text-align: center;font-weight:600; ">PENDIENTE DE PROCESAR</td>';
         }

         //validacion estado y modal
         if (data[i].Estado_Registro=='DENEGADA') {
            var Estado = '<td style="text-align: center;font-weight:600; "><span class="badge badge-md badge-danger text-uppercase">DENEGADA</span></td>';
         }else{
            var Estado = '<td style="text-align: center;"><a><i class="fas fa-file-invoice-dollar" style="cursor:pointer;color:#893168;font-size: 40px;" onclick="Detalle_pagos(\'' +data[i].ID_Ingreso + '\',\'' +data[i].Nombres + '\',\'' +data[i].Apellidos + '\',\'' +data[i].ID_Persona + '\',\'' +data[i].Telefono + '\',\'' +data[i].OBS_Apr_Den + '\',\'' +data[i].Estado_Registro + '\',\'' +data[i].Nombres_2 + '\',\'' +data[i].Apellidos_2 + '\',\'' +data[i].ID_Persona_2 + '\',\'' +data[i].Telefono_2 + '\',\'' +data[i].OBS_Apr_Den_2 + '\',\'' +data[i].Estado_Registro_2 + '\',\'' +data[i].DESC_Denegacion_2 + '\',\'' +data[i].Nombres_3 + '\',\'' +data[i].Apellidos_3 + '\',\'' +data[i].ID_Persona_3 + '\',\'' +data[i].Telefono_3 + '\',\'' +data[i].OBS_Apr_Den_3 + '\',\'' +data[i].Estado_Registro_3 + '\',\'' +data[i].DESC_Denegacion_3 + '\')"></i></a></td>';
         }


        resultregistrocon +='<tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td class="text-center">' + data[i].ID_Ingreso + '</td> <td class="text-center">' + data[i].Nombre_Completo +'</td><td class="text-center">'+data[i].DESC_Tipo+'</td><td class="text-center">' + data[i].DESC_Modalidad +'</td><td class="text-center">' + data[i].ID_Placa +'</td><td class="text-center">' + data[i].ID_Certificado_Operacion +'</td><td class="text-center">' + data[i].ID_Numero_Registro +'</td><td class="text-center">' + data[i].DESC_Empresa +'</td>'+OBS+'<td class="text-center">' + data[i].Sistema_Fecha +'</td>'+Estado+'';
        }

        var ultima = "";
        var activepage = "";
        for (var i = 0; i < pagin.length; i++) {
          pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchRegistroConductores(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
          activepage = pagin[i].Paginas;
          if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
          anter = pagin[0].Paginas;
        }
        var backpage = ultima-10;
        var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchRegistroConductores(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchRegistroConductores(0);"><i class="fa fa-home"></i></a></li>';

        var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPageRegistrocon();" ><i class="fa fa-angle-double-right"></i></a></li>';


        if (activepage == ultima) {
          Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        }

        if (info.last <= 10) {
          anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        }

        $("#resultMsg_Registrocon").html(info.Total);
        $("#resultregistrocon").html(resultregistrocon);
        $("#paginaregistrocon").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resultregistrocon").html('<tr> <td colspan="10" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resultregistrocon").html('<tr> <td colspan="10" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }

function Detalle_pagos(ID_Ingreso,Nombres,Apellidos,ID_Persona,Telefono,OBS_Apr_Den,Estado_Registro,Nombres2,Apellidos2,ID_Persona2,Telefono2,OBS_Apr_Den2,Estado_Registro2,DESC_Denegacion2,Nombres3,Apellidos3,ID_Persona3,Telefono3,OBS_Apr_Den3,Estado_Registro3,DESC_Denegacion3){

   swal({
      title: '<span><i class="fas fa-search-dollar mr-2" style="font-size: 35px;"></i><u>Detalle de Pagos</u></span>',
      text: '<a style="color:white" onclick="Pago_1er(\''+ID_Ingreso+'\' ,\''+Nombres+'\',\''+Apellidos+'\',\''+ID_Persona+'\',\''+Telefono+'\',\''+OBS_Apr_Den+'\',\''+Estado_Registro+'\')" class="btn mb-2 mr-2 btn-success animate-up-2">1 Pago</a><br><a style="color:white" onclick="Pago_2da(\''+ID_Ingreso+'\',\''+Nombres2+'\',\''+Apellidos2+'\',\''+ID_Persona2+'\',\''+Telefono2+'\',\''+OBS_Apr_Den2+'\',\''+Estado_Registro2+'\',\''+DESC_Denegacion2+'\')" class="btn mb-2 mr-2 btn-warning animate-left-2">2 Pago</a><br><a style="color:white" onclick="Pago_3era(\''+ID_Ingreso+'\',\''+Nombres3+'\',\''+Apellidos3+'\',\''+ID_Persona3+'\',\''+Telefono3+'\',\''+OBS_Apr_Den3+'\',\''+Estado_Registro3+'\',\''+DESC_Denegacion3+'\')" class="btn mb-2 mr-2 btn-info animate-right-2">3 Pago</a><br><a onclick="Salir()" class="btn mb-2 mr-2 btn-danger animate-down-2" style="margin-left: 70%;color:white">Salir</a>',
      type: 'warning',
      html:true,
      showConfirmButton: false

   })
   $("#contenthome").removeClass("a");
   $("#contenthome").addClass("m");
}

function Pago_1er(ID_Ingreso,Nombres,Apellidos,ID_Persona,Telefono,OBS_Apr_Den,Estado_Registro){
swal.close();
   openModal('modal-detalle');
   $("#titlemodal").html("Detalle pago Primer Vuelta: "+ID_Ingreso);
   $("#headerpago").addClass("primer-pago-background");
   $("#textoverif").html("Verificación pago Primer Vuelta Registro ");
   $("#estadoverif").html(Estado_Registro);
   $("#textnumero").html("Primero");

   if (Estado_Registro =='APROBADA') {
      $("#tarjetaverif").addClass("alert-success");
   }else {
      $("#tarjetaverif").addClass("alert-danger");
   }

   $("#inputsdenegados").hide();
   $("#inputspersonas").show();
   $("#inputsdatospersona").show();

   $('#nombre').val(Nombres);
   $('#apellido').val(Apellidos);
   $('#identidad').val(ID_Persona);
   $('#telefono').val(Telefono);
   $('#observaciones').val(OBS_Apr_Den);
    
}

function Pago_2da(ID_Ingreso,Nombres2,Apellidos2,ID_Persona2,Telefono2,OBS_Apr_Den2,Estado_Registro2,DESC_Denegacion2){

   if (Estado_Registro2 == 'null') {

     Fatalta_revision(ID_Ingreso)

   }else{

      swal.close();
      openModal('modal-detalle');
      $("#titlemodal").html("Detalle pago Segunda Vuelta: "+ID_Ingreso);
      $("#headerpago").removeClass("primer-pago-background");
      $("#headerpago").addClass("bg-info");
      $("#textoverif").html("Verificación pago Segunda Vuelta Registro ");
      $("#estadoverif").html(Estado_Registro2);
      $("#textnumero").html("Segundo");

      if (Estado_Registro2 =='APROBADA') {
         $("#tarjetaverif").addClass("alert-success");
      }else {
         $("#tarjetaverif").addClass("alert-danger");
      }

      if (DESC_Denegacion2 != 'null') {

         $("#inputsdenegados").show();
         $("#inputspersonas").hide();
         $("#inputsdatospersona").hide();
         $('#denegadopor').val(DESC_Denegacion2);
         $('#motivo').val(OBS_Apr_Den2); 

      }else{

         $("#inputsdenegados").hide();
         $("#inputspersonas").show();
         $("#inputsdatospersona").show();
      }

      $('#nombre').val(Nombres2);
      $('#apellido').val(Apellidos2);
      $('#identidad').val(ID_Persona2);
      $('#telefono').val(Telefono2);
      $('#observaciones').val(OBS_Apr_Den2);     
   } 
}

function Pago_3era(ID_Ingreso,Nombres3,Apellidos3,ID_Persona3,Telefono3,OBS_Apr_Den3,Estado_Registro3,DESC_Denegacion3){

   if (Estado_Registro3 == 'null') {

      Fatalta_revision(ID_Ingreso)

   }else{

      swal.close();
      openModal('modal-detalle');
      $("#titlemodal").html("Detalle pago Segunda Vuelta: "+ID_Ingreso);
      $("#headerpago").removeClass("primer-pago-background");
      $("#headerpago").addClass("bg-info");
      $("#textoverif").html("Verificación pago Segunda Vuelta Registro ");
      $("#estadoverif").html(Estado_Registro3);
      $("#textnumero").html("Tercer");

      if (Estado_Registro2 =='APROBADA') {
         $("#tarjetaverif").addClass("alert-success");
      }else {
         $("#tarjetaverif").addClass("alert-danger");
      }

      if (DESC_Denegacion3 != 'null') {

         $("#inputsdenegados").show();
         $("#inputspersonas").hide();
         $("#inputsdatospersona").hide();
         $('#denegadopor').val(DESC_Denegacion3);
         $('#motivo').val(OBS_Apr_Den3); 

      }else{

         $("#inputsdenegados").hide();
         $("#inputspersonas").show();
         $("#inputsdatospersona").show();
      }

      $('#nombre').val(Nombres3);
      $('#apellido').val(Apellidos3);
      $('#identidad').val(ID_Persona3);
      $('#telefono').val(OBS_Apr_Den3);
      $('#observaciones').val(OBS_Apr_Den3);
   }     
    
}

function Fatalta_revision(ID_Ingreso){

   swal({
      title: "¡No se ha verificado el Registro!",
      text: '¡El registro: <span style="color:#FF586B;font-weight: 400;">'+ ID_Ingreso+'</span> no ha sido verificado para la segunda y/o Tercera vuelta del Pago!',
      type: "warning",
      html:true,
      showCancelButton: true,
      showConfirmButton: false,
      cancelButtonText: "Salir",
      closeOnConfirm: false
   })
  $("#contenthome").removeClass("m");
  $("#contenthome").addClass("a");
}

function Salir(){
  swal.close();
}
</script>
<!--termina la consulta de registro conductores-->

<!--Busuqeda de resoluciones-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchResoluciones(0);
  }, false);

  function nextPageResolucion() {
    var suma = parseInt(last);
    searchResoluciones(suma);
  }

  function backPageResolucion() {
    searchResoluciones(last - 10);
  }

  function searchResoluciones(le) {
   $("#headerresolucion").html('Se encontro las siguiente información de la Resolucion segun tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").hide();
   $("#conconductor").hide();
   $("#concertificado").hide();
   $("#coneventuales").hide();
   $("#conregistrocon").hide();
   $("#conresolucion").show();
   $("#convalidacionip").hide();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==26) {
      var tipoparametro = 'ID_ColegiacionAPL';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==27) {
      var tipoparametro = 'NombreSolicitante';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==28) {
      var tipoparametro = 'ID_Expediente';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==29) {
      var tipoparametro = 'CodigoDocumentoNotificacion';
      var parameter = last+'&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = last+'&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-resoluciones&Next=" + parameter,
      success: function(dataserver) {
        var resultresolucion = '';
        var pagination = '';
        var info = dataserver[0];
        var pagin = dataserver[1];
        last = info.last;
        var data = dataserver[2];

        for (var i = 0; i < data.length; i++) {

        resultresolucion +='<tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td class="text-center">' + data[i].CodigoDocumentoNotificacion + '</td> <td class="text-center">' + data[i].ID_Expediente +'</td><td class="text-center">'+data[i].FechaNotificacion+'</td><td class="text-center">' + data[i].NombreSolicitante +'</td><td class="text-center">' + data[i].NombreApoderadoLegal +'</td><td style="text-align: center;"><a><i class="fas fa-download" style="cursor:pointer;color:#893168;font-size: 40px"></i></a></td>';
        }

        var ultima = "";
        var activepage = "";
        for (var i = 0; i < pagin.length; i++) {
          pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchResoluciones(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
          activepage = pagin[i].Paginas;
          if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
          anter = pagin[0].Paginas;
        }
        var backpage = ultima-10;
        var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchResoluciones(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchResoluciones(0);"><i class="fa fa-home"></i></a></li>';

        var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPageResolucion();" ><i class="fa fa-angle-double-right"></i></a></li>';


        if (activepage == ultima) {
          Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        }

        if (info.last <= 10) {
          anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        }

        $("#resultMsg_Resolucion").html(info.Total);
        $("#resultresolucion").html(resultresolucion);
        $("#paginaresolucion").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resultresolucion").html('<tr> <td colspan="6" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resultresolucion").html('<tr> <td colspan="6" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }
</script>
<!--termina la consulta de resoluciones-->

<!--Busuqeda de validacion ip-->
<script>
  var last = 0;
  document.addEventListener('DOMContentLoaded', function() {
    //searchValidacionIP(0);
  }, false);

  function nextPageValidacionip() {
    var suma = parseInt(last);
    searchValidacionIP(suma);
  }

  function backPageValidacionip() {
    searchValidacionIP(last - 10);
  }

  function searchValidacionIP(le) {
   $("#headervalidacionip").html('Se encontro las siguiente información del Documento segun tu parámetro de búsqueda');
   $("#tablebar").show();
   $("#resultadobusqueda").show();
   $("#concenso").hide();
   $("#conconductor").hide();
   $("#concertificado").hide();
   $("#coneventuales").hide();
   $("#conregistrocon").hide();
   $("#conresolucion").hide();
   $("#convalidacionip").show();

    last = le;

    $("#resultbar").html(
      '<tr> <td colspan="12" style="text-align:center"><i class="far fa-smile-beam" style="margin-right: 5px;"></i>Buscando tus datos...<br><div class="progress" style="height: 30px !important;"> <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 100%;animation: 0s ease 0s 1 normal none running animate-positive !important;"></div> </div> </td> </tr>'
    );

    if ($('#inputparambusqueda').val()==30) {
      var tipoparametro = 'certificado';
      var parameter = '&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==31) {
      var tipoparametro = 'permiso';
      var parameter = '&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==32) {
      var tipoparametro = 'placa';
      var parameter = '&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==33) {
      var tipoparametro = 'solicitud';
      var parameter = '&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else if ($('#inputparambusqueda').val()==34) {
      var tipoparametro = 'expediente';
      var parameter = '&col_name='+$('#inpbuscador').val()+'&Tipo='+tipoparametro;
    }else {
      var parameter = '&col_name=';
    }
    
    $.ajax({
      dataType: "json",
      timeout: 8000,
      url: "Api_PW.php?action=search-documentos-ip" + parameter,
      success: function(dataserver) {
        var resultvalidacionip = '';
        //var pagination = '';
        //var info = dataserver[0];
        //var pagin = dataserver[1];
        //last = info.last;
        var data = dataserver[0];

        for (var i = 0; i < data.length; i++) {

         if (data[0].Validacion_Unidad_Nueva==null) {
            var marca = data[0].Marca_Unidad_Actual;
            var modelo = data[0].Modelo_Unidad_Actual;
            var color = data[0].Color_Unidad_Actual;
            var motor = data[0].Motor_Unidad_Actual;
            var chasis = data[0].Chasis_Unidad_Actual;
            var tipo_unidad = data[0].Tipo_Unidad_Actual;
         }else {
            var marca = data[0].Marca_Unidad_Nueva;
            var modelo = data[0].Modelo_Unidad_Nueva;
            var color = data[0].Color_Unidad_Nueva;
            var motor = data[0].Motor_Unidad_Nueva;
            var chasis = data[0].Chasis_Unidad_Nueva;
            var tipo_unidad = data[0].Tipo_Unidad_Nueva;
         }

        resultvalidacionip +='<tr> <td style="text-align: center">'+data[0].Solicitud+'</td> <td class="text-center">'+data[0].Expediente+'</td> <td class="text-center">'+data[0].Numero_Documento+'</td> <td class="text-center">'+data[0].Concesionario+'</td> <td class="text-center">'+data[0].Permiso_Explotacion+'</td> <td class="text-center">'+data[0].Certificado_Operacion+'</td> <td class="text-center">'+marca+'</td> <td class="text-center">'+modelo+'</td> <td class="text-center">'+color+'</td> <td class="text-center">'+motor+'</td> <td class="text-center">'+chasis+'</td> <td class="text-center">'+tipo_unidad+'</td></tr> ';
        }

        // <tr> <td style="text-align: center">' + data[i].ROWNUMBER + '</td> <td class="text-center">' + data[i].ID_Solicitud + '</td> <td class="text-center">' + data[i].ID_Certificado +'</td><td class="text-center">'+data[i].ID_Permiso+'</td><td class="text-center">' + data[i].Marca +'</td><td class="text-center">' + data[i].Modelo +'</td><td class="text-center">' + data[i].Color +'</td><td class="text-center">' + data[i].Motor +'</td><td class="text-center">' + data[i].Chasis +'</td><td class="text-center">' + data[i].TipoUnidad +'</td>

        // var ultima = "";
        // var activepage = "";
        // for (var i = 0; i < pagin.length; i++) {
        //   pagination += '<li class="page-item ' + pagin[i].Activo + ' "><a class="page-link" href="javascript:searchValidacionIP(\'' + pagin[i].Paginas + '\');">' + pagin[i].Nun + '</a></li>';
        //   activepage = pagin[i].Paginas;
        //   if (pagin[i].Activo=='active') { ultima = pagin[i].Paginas; console.log(ultima); }
        //   anter = pagin[0].Paginas;
        // }
        // var backpage = ultima-10;
        // var anterior = '<li id="anterior" class="page-item"><a class="page-link" href="javascript:searchValidacionIP(\'' +backpage+'\');"><i class="fa fa-angle-double-left"></i></a></li> <li class="page-item"><a class="page-link" href="javascript:searchValidacionIP(0);"><i class="fa fa-home"></i></a></li>';

        // var Siguiente = '<li class="page-item"><a class="page-link" href="javascript:nextPageValidacionip();" ><i class="fa fa-angle-double-right"></i></a></li>';


        // if (activepage == ultima) {
        //   Siguiente = '<li class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-right"></i></a></li>';
        // }

        // if (info.last <= 10) {
        //   anterior = '<li id="anterior" class="page-item disabled"><a class="page-link"><i class="fa fa-angle-double-left"></i></a></li>';
        // }

        //$("#resultMsg_Validaconip").html(info.Total);
        $("#resultvalidacionip").html(resultvalidacionip);
        //$("#paginavalidacionip").html(anterior + pagination + Siguiente);
        $("#tablebar").hide();
        $('.tooltipped').tooltip({
          delay: 0
        });

        if (data.length == 0) {
          $("#resultvalidacionip").html('<tr> <td colspan="6" style="text-align:center">¡Lo sentimos mucho! El registro que buscas No existe en la base de datos.</td></tr>');
        }
      }

    }).error(function() {
      $("#resultvalidacionip").html('<tr> <td colspan="6" style="text-align:center;color: #E57373;">¡Lo sentimos mucho!Ocurrio un error durante la busqueda, por favor intenta nuevamente.</td></tr>');
    });
  }
</script>
<!--termina la consulta de resoluciones-->